@using Hermes.Client.Web.Models.Catalog
@model CatalogScriptViewModel

<script type="text/javascript">
    const addToBasketButton = document.getElementById('addToBasketButton')
    const toasts = document.getElementsByClassName('toast')

    if (addToBasketButton) {
        addToBasketButton.addEventListener('click', () => {

            fetch('@Model.BaseAddress@Model.GetBasketEndpointPath', {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                    "items": [
                        {
                            "productId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                            "productName": "string",
                            "price": 0,
                            "quantity": 0,
                            "pictureUri": "string"
                        }
                    ]
                })
            })
            .then(response => response.json())
            .then(response => {
                console.log(JSON.stringify(response))

                for (const toastElement of toasts) {
                    const toast = new bootstrap.Toast(toastElement)
                    toast.show()
                }
            })
        })
    }
</script>